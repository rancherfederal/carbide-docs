"use strict";(self.webpackChunkcarbide_docs=self.webpackChunkcarbide_docs||[]).push([[774],{197:(e,a,i)=>{i.r(a),i.d(a,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>n,toc:()=>o});var r=i(4848),s=i(8453);const t={},c="Validating Images",n={id:"registry-docs/validating-images",title:"Validating Images",description:"This will guide you through validating the signatures and attestations of each image in the secured registry, as well as how to download artifacts about the image (Software Bill of Materials, Vulnerability Scan, Cryptographic Signature, etc...).",source:"@site/docs/registry-docs/validating-images.md",sourceDirName:"registry-docs",slug:"/registry-docs/validating-images",permalink:"/carbide-docs/docs/registry-docs/validating-images",draft:!1,unlisted:!1,editUrl:"https://github.com/rancherfederal/carbide-docs/edit/main/docs/registry-docs/validating-images.md",tags:[],version:"current",frontMatter:{},sidebar:"carbideSidebar",previous:{title:"Prerequisites",permalink:"/carbide-docs/docs/registry-docs/prereqs"},next:{title:"Copying Images to a Registry",permalink:"/carbide-docs/docs/registry-docs/copying-images"}},d={},o=[{value:"Secure Supply Chain",id:"secure-supply-chain",level:2},{value:"Display Supply Chain Artifacts",id:"display-supply-chain-artifacts",level:2},{value:"Verifying the Digital Signature",id:"verifying-the-digital-signature",level:3},{value:"Viewing the Software Bill of Materials",id:"viewing-the-software-bill-of-materials",level:3},{value:"Viewing the Vulnerability Scan Results",id:"viewing-the-vulnerability-scan-results",level:3},{value:"Display Supply Chain Artifacts",id:"display-supply-chain-artifacts-1",level:2},{value:"Verifying the Digital Signature",id:"verifying-the-digital-signature-1",level:3},{value:"Viewing the Software Bill of Materials",id:"viewing-the-software-bill-of-materials-1",level:3},{value:"Viewing the Vulnerability Scan Results",id:"viewing-the-vulnerability-scan-results-1",level:3},{value:"Resources",id:"resources",level:3}];function l(e){const a={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components},{Details:i}=a;return i||function(e,a){throw new Error("Expected "+(a?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"validating-images",children:"Validating Images"})}),"\n",(0,r.jsx)(a.p,{children:"This will guide you through validating the signatures and attestations of each image in the secured registry, as well as how to download artifacts about the image (Software Bill of Materials, Vulnerability Scan, Cryptographic Signature, etc...)."}),"\n",(0,r.jsx)(a.h2,{id:"secure-supply-chain",children:"Secure Supply Chain"}),"\n",(0,r.jsxs)(a.p,{children:["Before pulling images or even after images have been pushed to a registry, you should always verify those images against the carbide public key. Below are the instructions for using ",(0,r.jsx)(a.code,{children:"cosign"})," directly from a registry."]}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"NOTE:"})," You'll need to substitute ",(0,r.jsx)(a.code,{children:"rgcrprod.azurecr.us"})," with your own registry domain, if verifying images in your own registry."]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"In Carbide Images v2 (or Cosign v2), the attachment of supply chain artifacts to the top layer of an image has been deprecated. In order for us to maintain interoperability, we have migrated our images and supply chain artifacts to be attached at the individual layer for a specific platform or architecture of an image."}),"\n",(0,r.jsxs)(a.p,{children:["If you would like to see more information, please see the noticed posted ",(0,r.jsx)(a.a,{href:"https://github.com/sigstore/cosign/blob/main/specs/SBOM_SPEC.md",children:"here"}),"!"]}),"\n",(0,r.jsxs)(i,{open:!0,children:[(0,r.jsxs)("summary",{children:[(0,r.jsx)("b",{children:"Carbide Images v2"})," (After 03/2024)"]}),(0,r.jsx)(a.h2,{id:"display-supply-chain-artifacts",children:"Display Supply Chain Artifacts"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# display supply chain related artifacts for an image\ncosign tree rgcrprod.azurecr.us/carbide/carbide-docs:0.1.4\n\ud83d\udce6 Supply Chain Security Related artifacts for an image: rgcrprod.azurecr.us/carbide/carbide-docs:0.1.4\n\u2514\u2500\u2500 \ud83d\udd10 Signatures for an image tag: rgcrprod.azurecr.us/carbide/carbide-docs:sha256-9f4251c8cb5161b7a1670788d4e716e735779804933e4db7698a625a2c762a44.sig\n   \u2514\u2500\u2500 \ud83c\udf52 sha256:9e1b59dc650801d4d088c7b816a34f2fb9d8e53a040615750bc45d9202b522b0\n"})}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# display supply chain related artifacts for an image\n# example image digest for carbide-docs:0.1.4 for linux/amd64\ncosign tree rgcrprod.azurecr.us/carbide/carbide-docs@sha256:9cfda4875822b37f1e899c962e9bae5bb709235a1794834a839eaa74f429eb91\n\ud83d\udce6 Supply Chain Security Related artifacts for an image: rgcrprod.azurecr.us/carbide/carbide-docs@sha256:9cfda4875822b37f1e899c962e9bae5bb709235a1794834a839eaa74f429eb91\n\u2514\u2500\u2500 \ud83d\udcbe Attestations for an image tag: rgcrprod.azurecr.us/carbide/carbide-docs:sha256-9cfda4875822b37f1e899c962e9bae5bb709235a1794834a839eaa74f429eb91.att\n   \u251c\u2500\u2500 \ud83c\udf52 sha256:dfa305431fecc7148b2975285295701a4e7e2f314bda41efa1fe4fb31758dc68\n   \u2514\u2500\u2500 \ud83c\udf52 sha256:133e5c020fe7fd20ae4453a9193a3b2a5e36a0447aa9d322ba83494bfde912d4\n\u2514\u2500\u2500 \ud83d\udd10 Signatures for an image tag: rgcrprod.azurecr.us/carbide/carbide-docs:sha256-9cfda4875822b37f1e899c962e9bae5bb709235a1794834a839eaa74f429eb91.sig\n   \u2514\u2500\u2500 \ud83c\udf52 sha256:f8cf6aea22f450991fc1800bc0b1440377a40833a94ff51c850210218fd5ad4d\n"})}),(0,r.jsx)(a.h3,{id:"verifying-the-digital-signature",children:"Verifying the Digital Signature"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# verify the image's attestation by validating the supplied signature\ncosign verify --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs:0.1.4 | jq\n"})}),(0,r.jsx)(a.h3,{id:"viewing-the-software-bill-of-materials",children:"Viewing the Software Bill of Materials"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# verify the image's sbom attestation by validating the supplied signature\ncosign verify-attestation --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs@sha256:9cfda4875822b37f1e899c962e9bae5bb709235a1794834a839eaa74f429eb91 --type spdxjson | jq\n\n# view the image's sbom\ncosign verify-attestation --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs@sha256:9cfda4875822b37f1e899c962e9bae5bb709235a1794834a839eaa74f429eb91 --type spdxjson | jq -r '.payload' | base64 -d | jq\n"})}),(0,r.jsx)(a.h3,{id:"viewing-the-vulnerability-scan-results",children:"Viewing the Vulnerability Scan Results"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# verify the image's vulnerability attestation by validating the supplied signature\ncosign verify-attestation --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs@sha256:9cfda4875822b37f1e899c962e9bae5bb709235a1794834a839eaa74f429eb91 --type vuln | jq\n\n# view the image's vulnerability scan results\ncosign verify-attestation --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs@sha256:9cfda4875822b37f1e899c962e9bae5bb709235a1794834a839eaa74f429eb91 --type vuln | jq -r '.payload' | base64 -d | jq\n"})})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsxs)("summary",{children:[(0,r.jsx)("b",{children:"Carbide v1"})," (Before 03/2024)"]}),(0,r.jsx)(a.h2,{id:"display-supply-chain-artifacts-1",children:"Display Supply Chain Artifacts"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# display supply chain related artifacts for an image\ncosign tree rgcrprod.azurecr.us/carbide/carbide-docs:0.1.3\n\ud83d\udce6 Supply Chain Security Related artifacts for an image: rgcrprod.azurecr.us/carbide/carbide-docs:0.1.3\n\u2514\u2500\u2500 \ud83d\udcbe Attestations for an image tag: rgcrprod.azurecr.us/carbide/carbide-docs:sha256-4d8b3e7e6e1a7640ca5f4ea833a5aef7a6f031947093e3e7625c8c949c1c8839.att\n   \u2514\u2500\u2500 \ud83c\udf52 sha256:8890d36772569483c9295be31a779770af0a61b51c6ba83cecc699fc724b9fd7\n\u2514\u2500\u2500 \ud83d\udd10 Signatures for an image tag: rgcrprod.azurecr.us/carbide/carbide-docs:sha256-4d8b3e7e6e1a7640ca5f4ea833a5aef7a6f031947093e3e7625c8c949c1c8839.sig\n   \u2514\u2500\u2500 \ud83c\udf52 sha256:a28126ae0a4bb23f71787e912125c25232677f6948812d937fd8feb9fe03ac6f\n\u2514\u2500\u2500 \ud83d\udce6 SBOMs for an image tag: rgcrprod.azurecr.us/carbide/carbide-docs:sha256-4d8b3e7e6e1a7640ca5f4ea833a5aef7a6f031947093e3e7625c8c949c1c8839.sbom\n   \u2514\u2500\u2500 \ud83c\udf52 sha256:970fc626b7075bd4822083cebc26d2e7cfcc1d5f1bfbcf9c3d0b3543a769be99\n"})}),(0,r.jsx)(a.h3,{id:"verifying-the-digital-signature-1",children:"Verifying the Digital Signature"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# verify the image's attestation by validating the supplied signature\ncosign verify --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs:0.1.3\n"})}),(0,r.jsx)(a.h3,{id:"viewing-the-software-bill-of-materials-1",children:"Viewing the Software Bill of Materials"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# verify the image's SBOM attestation by validating the supplied signature\ncosign verify --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs:0.1.3 --attachment sbom\n\n# view the image's SBOM\ncosign download sbom rgcrprod.azurecr.us/carbide/carbide-docs:0.1.3\n"})}),(0,r.jsx)(a.h3,{id:"viewing-the-vulnerability-scan-results-1",children:"Viewing the Vulnerability Scan Results"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# verify the image's SBOM attestation by validating the supplied signature\ncosign verify-attestation --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs:0.1.3 --type vuln | jq\n\n# view the image's vulnerability scan results\ncosign verify-attestation --key carbide-key.pub rgcrprod.azurecr.us/carbide/carbide-docs:0.1.3 --type vuln | jq -r '.payload' | base64 -d | jq\n"})})]}),"\n",(0,r.jsx)(a.h3,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(a.p,{children:["For more information on ",(0,r.jsx)(a.code,{children:"cosign"}),", check out the ",(0,r.jsx)(a.a,{href:"https://edu.chainguard.dev/open-source/sigstore/cosign/how-to-verify-file-signatures-with-cosign",children:"Chainguard Academy"}),"."]})]})}function u(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,a,i)=>{i.d(a,{R:()=>c,x:()=>n});var r=i(6540);const s={},t=r.createContext(s);function c(e){const a=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function n(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(t.Provider,{value:a},e.children)}}}]);