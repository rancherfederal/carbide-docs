"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2639],{4137:(e,r,t)=>{t.d(r,{Zo:()=>u,kt:()=>p});var a=t(7294);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function o(e,r){if(null==e)return{};var t,a,i=function(e,r){if(null==e)return{};var t,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)t=n[a],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)t=n[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=a.createContext({}),c=function(e){var r=a.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):s(s({},r),e)),t},u=function(e){var r=c(e.components);return a.createElement(l.Provider,{value:r},e.children)},g={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},d=a.forwardRef((function(e,r){var t=e.components,i=e.mdxType,n=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=c(t),p=i,y=d["".concat(l,".").concat(p)]||d[p]||g[p]||n;return t?a.createElement(y,s(s({ref:r},u),{},{components:t})):a.createElement(y,s({ref:r},u))}));function p(e,r){var t=arguments,i=r&&r.mdxType;if("string"==typeof e||i){var n=t.length,s=new Array(n);s[0]=d;var o={};for(var l in r)hasOwnProperty.call(r,l)&&(o[l]=r[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var c=2;c<n;c++)s[c]=t[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7258:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>g,frontMatter:()=>n,metadata:()=>o,toc:()=>c});var a=t(7462),i=(t(7294),t(4137));const n={},s="Validating Images",o={unversionedId:"registry-docs/validating-images",id:"registry-docs/validating-images",title:"Validating Images",description:"This will guide you through validating the signatures and attestations of each image in the secured registry, as well as how to download artifacts about the image (SBOM, Trivy Vulnerability Scan).",source:"@site/docs/registry-docs/validating-images.md",sourceDirName:"registry-docs",slug:"/registry-docs/validating-images",permalink:"/carbide-docs/docs/registry-docs/validating-images",draft:!1,editUrl:"https://github.com/rancherfederal/carbide-docs/edit/main/docs/registry-docs/validating-images.md",tags:[],version:"current",frontMatter:{},sidebar:"carbideSidebar",previous:{title:"Prerequisites",permalink:"/carbide-docs/docs/registry-docs/prereqs"},next:{title:"Copy Release Images to Registry",permalink:"/carbide-docs/docs/registry-docs/copying-images"}},l={},c=[{value:"ssf-key.pub",id:"ssf-keypub",level:4},{value:"Secure Supply Chain",id:"secure-supply-chain",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Checking the Digital Signature In A Registry",id:"checking-the-digital-signature-in-a-registry",level:2},{value:"Software Bill of Materials",id:"software-bill-of-materials",level:3},{value:"Vulnerability Scan Results",id:"vulnerability-scan-results",level:3},{value:"Resources",id:"resources",level:3}],u={toc:c};function g(e){let{components:r,...t}=e;return(0,i.kt)("wrapper",(0,a.Z)({},u,t,{components:r,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"validating-images"},"Validating Images"),(0,i.kt)("p",null,"This will guide you through validating the signatures and attestations of each image in the secured registry, as well as how to download artifacts about the image (SBOM, Trivy Vulnerability Scan)."),(0,i.kt)("h4",{id:"ssf-keypub"},"ssf-key.pub"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE5zlXeLmRxBHbVmDRZpnCFdzKhyKO\ntCAZva7CLlk/6gxvCM0QkIKznfaGTRMMYTaHMdQSau6yulDLlpokA++i8Q==\n-----END PUBLIC KEY-----\n")),(0,i.kt)("p",null,"The key is also available to be pulled from each Carbide release's artifacts found ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/rancherfederal/carbide-releases/releases/"},"here")),(0,i.kt)("h2",{id:"secure-supply-chain"},"Secure Supply Chain"),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.sigstore.dev/cosign/installation/"},"Cosign CLI"))),(0,i.kt)("h2",{id:"checking-the-digital-signature-in-a-registry"},"Checking the Digital Signature In A Registry"),(0,i.kt)("p",null,"Before pulling images, or after images have been pushed to a registry, you should verify those images against the RGS public key. These instructions are for verifying images directly from a registry."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"NOTE"),": You'll need to substitute ",(0,i.kt)("inlineCode",{parentName:"p"},"rgcrprod.azurecr.us")," with your own registry domain if verifying in your own registry."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# export the public key for the production ssf\nexport KEY=ssf-key.pub\n# Verifying the image's attestation by validating the supplied signature\ncosign verify --key $KEY rgcrprod.azurecr.us/rancher/rancher:v2.7.1\n")),(0,i.kt)("h3",{id:"software-bill-of-materials"},"Software Bill of Materials"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# Verifying the image's SBOM attestation by validating the supplied signature\ncosign verify --key $KEY rgcrprod.azurecr.us/rancher/rancher:v2.7.1 --attachment sbom\n\n# Viewing the image's SBOM\ncosign download sbom rgcrprod.azurecr.us/rancher/rancher:v2.7.1\n")),(0,i.kt)("h3",{id:"vulnerability-scan-results"},"Vulnerability Scan Results"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# Verifying the image's SBOM attestation by validating the supplied signature\ncosign verify-attestation --key $KEY rgcrprod.azurecr.us/rancher/rancher:v2.7.1 --type vuln > /dev/null\n\n# Viewing the image's vulnerability scan results\ncosign verify-attestation --key $KEY rgcrprod.azurecr.us/rancher/rancher:v2.7.1 --type vuln | jq -r '.payload' | base64 -d | jq\n")),(0,i.kt)("h3",{id:"resources"},"Resources"),(0,i.kt)("p",null,"For more information on ",(0,i.kt)("inlineCode",{parentName:"p"},"cosign"),", check out ",(0,i.kt)("a",{parentName:"p",href:"https://edu.chainguard.dev/open-source/sigstore/cosign/how-to-verify-file-signatures-with-cosign/"},"Chainguard Academy"),"."))}g.isMDXComponent=!0}}]);