"use strict";(self.webpackChunkcarbide_docs=self.webpackChunkcarbide_docs||[]).push([[9935],{4016:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>d});var r=i(4848),s=i(8453);const t={},c="Provisioning Clusters",o={id:"classified-provisioning-docs/usage",title:"Provisioning Clusters",description:"The following instructions apply to the Amazon EC2 C2S region, which is currently available in Tech Preview.",source:"@site/docs/classified-provisioning-docs/usage.md",sourceDirName:"classified-provisioning-docs",slug:"/classified-provisioning-docs/usage",permalink:"/carbide-docs/docs/classified-provisioning-docs/usage",draft:!1,unlisted:!1,editUrl:"https://github.com/rancherfederal/carbide-docs/edit/main/docs/classified-provisioning-docs/usage.md",tags:[],version:"current",frontMatter:{},sidebar:"carbideSidebar",previous:{title:"Installation",permalink:"/carbide-docs/docs/classified-provisioning-docs/installation"},next:{title:"Introduction",permalink:"/carbide-docs/docs/stigatron-docs/introduction"}},a={},d=[{value:"Creating a Carbide Cloud Credential",id:"creating-a-carbide-cloud-credential",level:2},{value:"Creating a Classified Cluster",id:"creating-a-classified-cluster",level:2},{value:"Registry Configuration",id:"registry-configuration",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"provisioning-clusters",children:"Provisioning Clusters"})}),"\n",(0,r.jsx)(n.p,{children:"The following instructions apply to the Amazon EC2 C2S region, which is currently available in Tech Preview."}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-carbide-cloud-credential",children:"Creating a Carbide Cloud Credential"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the Rancher Mananger menu, access Cloud Credentials (",(0,r.jsx)(n.code,{children:"Cluster Management"})," -> ",(0,r.jsx)(n.code,{children:"Cloud Credentials"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.code,{children:"Create"})," and choose ",(0,r.jsx)(n.code,{children:"Amazon"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Choose a name, click the toggle to enable the ",(0,r.jsx)(n.code,{children:"Carbide Instance Credential"}),", select the default region for your environment, and click ",(0,r.jsx)(n.code,{children:"Create"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Create Carbide Cloud Credential",src:i(3740).A+"",width:"2212",height:"1404"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-classified-cluster",children:"Creating a Classified Cluster"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the Rancher Manager menu, access ",(0,r.jsx)(n.code,{children:"Cluster Management"})," and click ",(0,r.jsx)(n.code,{children:"Create"}),". Ensure the ",(0,r.jsx)(n.code,{children:"RKE2/K3s"})," toggle is enabled and select ",(0,r.jsx)(n.code,{children:"Amazon EC2"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Select the Cloud Credentials created in the previous step, then add node pools as you normally would for provisioning a cluster from Rancher."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"PLEASE NOTE, in C2S:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["It is ",(0,r.jsx)(n.strong,{children:"required"})," for you to enter an ",(0,r.jsx)(n.code,{children:"AMI ID"})," and the respective ",(0,r.jsx)(n.code,{children:"SSH User"})," for that AMI ID under the ",(0,r.jsx)(n.code,{children:"Advanced"})," settings."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Not all Instance Types are available. Ensure you are leverage an Instance Type that is ",(0,r.jsx)(n.strong,{children:"available in your environment"}),". This list will be dynamic in the future."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Encrypted EBS volumes"})," are required. Ensure you select the ",(0,r.jsx)(n.code,{children:"Encrypt EBS Volumes"})," and choose a respective KMS key when provisioning."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["If no security group is provided, Rancher will attempt to create a Security Group. If the ability to create Security Groups is limited, have a Security Group created by your Account Manager/Broker that has the ",(0,r.jsx)(n.a,{href:"https://ranchermanager.docs.rancher.com/getting-started/installation-and-upgrade/installation-requirements/port-requirements#rancher-aws-ec2-security-group",children:"appropriate port configuration"})," and select that existing Security Group in the ",(0,r.jsx)(n.code,{children:"Advanced"})," settings."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Create RKE2 Cluster in C2S",src:i(3740).A+"",width:"2212",height:"1404"})}),"\n",(0,r.jsxs)(n.p,{children:["For more information on provisioning an RKE2/K3s cluster on Amazon EC2s, see the ",(0,r.jsx)(n.a,{href:"https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/launch-kubernetes-with-rancher/use-new-nodes-in-an-infra-provider/create-an-amazon-ec2-cluster",children:"Rancher docs"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"registry-configuration",children:"Registry Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["When using a private registry, downstream clusters must be configured with correct authentication and certificate information to access that registry via the ",(0,r.jsx)(n.a,{href:"https://docs.rke2.io/install/containerd_registry_configuration",children:"registries.yaml"})," file. Rancher provisioned clusters can be configured through the UI to generate the registries.yaml file."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under the ",(0,r.jsx)(n.code,{children:"Cluster Configuration"})," section when provisioning a cluster, select the ",(0,r.jsx)(n.code,{children:"Registries"})," section."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Enter the registry domain in the ",(0,r.jsx)(n.code,{children:"Container Registry"})," box, and either select existing registry credentials or create new credentials for authentication to the registry."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"If advanced configuration (mirroring, certificates, additional authentication) is required, add those to the advanced settings."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For more information, see the ",(0,r.jsx)(n.a,{href:"https://docs.rke2.io/install/containerd_registry_configuration",children:"RKE2 Containerd Registry Configuration"})," documentation."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},3740:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/create-carbide-cloud-creds-5c52dca92c3b02dc431f781a3b0ff5d4.png"},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>o});var r=i(6540);const s={},t=r.createContext(s);function c(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);